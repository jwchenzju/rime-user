schema:
  schema_id: wubi98
  name: 五笔98
  version: "1"

switches:
  - name: ascii_mode
    states: ["中文", "西文"]
  - name: full_shape
    states: ["半角", "全角"]

engine:
  processors:
    - ascii_composer
    - key_binder  # 搶在其他 processor 處理之前判定是否換頁用的符號鍵
    - speller
    - punctuator  # 否則「，。」就會由此上屏
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor 
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  max_code_length: 4

translator:
  dictionary: wubi98
  enable_completion: true
  enable_sentence: false

punctuator:
  import_preset: default

key_binder:
  bindings:             # 每條定義包含條件、接收按鍵（IBus規格的鍵名，可加修飾符，如「Control+Return」）、發送按鍵
    # --- 裸 Shift（左/右）同时切 ascii_mode 与 full_shape ---
    # - { when: always, accept: Shift_L, toggle: ascii_mode }
    # - { when: always, accept: Shift_L, toggle: full_shape }
    # - { when: always, accept: Shift_R, toggle: ascii_mode }
    # - { when: always, accept: Shift_R, toggle: full_shape }
    # --- 或者：使用 Shift+Space（更稳妥，不易被系统/前端拦截） ---
    - { when: always, accept: Shift+space, toggle: ascii_mode }
    - { when: always, accept: Shift+space, toggle: full_shape }

    - when:   paging    # 僅當已發生向後換頁時，
      accept: comma     # 將「逗號」鍵……
      send:   Page_Up   # 關聯到「向前換頁」；於是 navigator 將收到一發 Page_Up

    - when:   has_menu  # 只要有候選字即滿足條件
      accept: period
      send:   Page_Down

